(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.useparams={},o.React))})(this,function(o,s){"use strict";const a="USEPARAMS",v="popstate",L="?s",h="?n",S="?b",P="true",j={str:L,num:h,bool:S},k=()=>null,R=()=>typeof window<"u"?window.history:{},l=()=>new URLSearchParams(location.search),T=e=>Object.keys(e),E=()=>{const e=R().state;return e&&e[a]?e[a]:window[a]?window[a]:[...l()].reduce((n,[t,y])=>({...n,[t]:y}),{})},A=e=>new URL(`?${e.toString()}`,location).toString(),g=(e,n,t)=>{e&&(dispatchEvent(new CustomEvent(v,{detail:{param:e}})),window[a]=t,R().pushState({[a]:t},"",A(n)))},M=e=>{const n=E(),t=l();t.delete(e),delete n[e],g(e,t,n)},O=(e,n)=>{const t=l();t.set(e,n+""),g(e,t,{...E(),[e]:n})},_=e=>{const[n,t]=s.useState(0),[y,q]=s.useState({});return s.useEffect(()=>{const w=E(),c=l(),f={};let r="";const p=i=>{const u=e[i],b=w[i],m=c.get(i),x=i in e,U=b===void 0?u:b;if(m!=="undefined")return[L,h,S].includes(u)?(f[i]=b,u==h?m*1:u==S?m==P:m):(x&&m===null&&(r=P,c.set(i,U)),U)},d=[...T(w),...T(e)].reduce((i,u)=>({...i,[u]:p(u)}),{});q(d);const C={...d,...f};g(r,c,C)},[n]),s.useEffect(()=>{const w="next"in window&&window.next,c={events:{on:k,off:k}},f=w.router||c;function r({detail:p}){const d=p&&p.param;(!d||d in e||d===P)&&t(C=>C+1)}return addEventListener(v,r),f.events.on("routeChangeComplete",r),()=>{removeEventListener(v,r),f.events.off("routeChangeComplete",r)}},[]),y};o.pmask=j,o.removeParam=M,o.setParam=O,o.useParams=_,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
